version 16.9
service timestamps debug datetime msec
service timestamps log datetime msec
platform qfp utilization monitor load 80
no platform punt-keepalive disable-kernel-core
platform console serial
!
hostname HUB
!
boot-start-marker
boot-end-marker
!
!
logging buffered 900000
enable password cisco
!
no aaa new-model
!
!
!
!
!
!
!
ip host connect.njrusmc.net 203.0.113.1
ip host hub.njrusmc.net 10.0.0.1
ip host site2.njrusmc.net 10.0.0.2
ip host site3.njrusmc.net 10.0.0.3
ip domain name njrusmc.net
ip dhcp excluded-address 203.0.113.0 203.0.113.10
!
ip dhcp pool ZTP
 network 203.0.113.0 255.255.255.0
 default-router 203.0.113.1 
 domain-name njrusmc.net
 dns-server 203.0.113.1 
 option 150 ip 203.0.113.1 
 option 67 ascii ztp.py
!
!
!
no login on-success log
!
!
!
!
!
!
!
subscriber templating
! 
! 
! 
! 
!
multilink bundle-name authenticated
!
!
!
!
!
key chain KC_OSPF_AUTH
 key 1
  key-string SECRET123
   cryptographic-algorithm hmac-sha-256
!
!
!
!
!
!
!
!
!
!
license udi pid CSR1000V sn 9I3LFKG88AQ
no license smart enable
diagnostic bootup level minimal
!
spanning-tree extend system-id
!
!
!
username cisco privilege 15 password 0 cisco
!
redundancy
!
!
!
!
!
!
! 
!
!
!
!
!
!
!
!
!
!
!
!
! 
! 
!
!
interface Loopback0
 ip address 10.0.0.1 255.255.255.255
 ip ospf 1 area 0
!
interface Tunnel100
 description DMVPN HUB TUNNEL
 ip address 172.16.100.1 255.255.255.0
 no ip redirects
 ip nhrp network-id 100
 ip ospf authentication key-chain KC_OSPF_AUTH
 ip ospf network point-to-multipoint
 ip ospf 1 area 0
 tunnel source GigabitEthernet1
 tunnel mode gre multipoint
!
interface GigabitEthernet1
 description TO SITE LAN
 ip address 203.0.113.1 255.255.255.0
 negotiation auto
 no mop enabled
 no mop sysid
!
interface GigabitEthernet2
 description TO MGMT NETWORK
 ip address 192.168.2.191 255.255.255.0
 negotiation auto
 no mop enabled
 no mop sysid
!
interface GigabitEthernet3
 description TO DEVBOX
 ip address 10.0.19.1 255.255.255.0
 ip ospf 1 area 0
 negotiation auto
 no mop enabled
 no mop sysid
!
router ospf 1
 auto-cost reference-bandwidth 1000
 ttl-security all-interfaces
 passive-interface GigabitEthernet3
 passive-interface Loopback0
!
no ip forward-protocol nd
no ip http server
no ip http secure-server
ip dns server
!
ip ssh logging events
ip ssh version 2
!
!
!
tftp-server bootflash:ztp.py alias ztp.py
!
!
control-plane
!
!
!
!
!
banner incoming %
site2 serial: 9TVCW8U5WDO
site3 serial: 9XFZQ9A2Y9P

tclsh
puts [open "bootflash:ztp.py" w+] {(paste)
}
tclquit
%
!
line con 0
 exec-timeout 0 0
 privilege level 15
 stopbits 1
line vty 0 4
 exec-timeout 0 0
 login local
!
!
!
!
!
!
end
